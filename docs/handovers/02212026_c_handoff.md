# Session Handover — 2026-02-21 (Session C)

## What Was Done This Session

### Root Cause: Blank App Screen Fixed

**Problem:** `waypoint.clearpathedgroup.com` and `app.clearpathedgroup.com` both showed a blank white screen despite the server returning HTTP 200.

**Root cause:** When the repo was migrated from Netlify to Cloudflare Pages, `VITE_SUPABASE_URL` and `VITE_SUPABASE_ANON_KEY` were set as GitHub secrets but with empty values. Every build since then baked empty strings into the JS bundle, causing `createClient('', '')` — a broken Supabase client that silently fails, leaving the app in a permanent loading state.

**Evidence from build log:**
```
echo "VITE_SUPABASE_URL=" >> .env.local       ← was empty
echo "VITE_SUPABASE_ANON_KEY=" >> .env.local   ← was empty
echo "VITE_SUPABASE_SERVICE_ROLE_KEY=***"      ← was set
```

**Fix:**
1. Set `VITE_SUPABASE_URL=https://kvxecksvkimcgwhxxyhw.supabase.co` via `gh secret set`
2. Set `VITE_SUPABASE_ANON_KEY=eyJhbG...YY` via `gh secret set`
3. Triggered fresh `workflow_dispatch` deploy
4. Confirmed new bundle `index-CYWzYBgf.js` contains `kvxecksvkimcgwhxxyhw`

### DNS Fix
`waypoint.clearpathedgroup.com` CNAME was missing — user re-added it in Cloudflare dashboard.

### Supabase Auth URLs
User added to Supabase Auth → URL Configuration → Redirect URLs:
- `https://waypoint.clearpathedgroup.com/**`
- `https://app.clearpathedgroup.com/**`

---

## GitHub Secrets — Current State (all verified set)

| Secret | Status |
|--------|--------|
| `CLOUDFLARE_API_TOKEN` | ✅ Set |
| `CLOUDFLARE_ACCOUNT_ID` | ✅ Set |
| `VITE_SUPABASE_URL` | ✅ Set (fixed this session) |
| `VITE_SUPABASE_ANON_KEY` | ✅ Set (fixed this session) |
| `VITE_SUPABASE_SERVICE_ROLE_KEY` | ✅ Set |

---

## Pending Items for Next Session

1. **Google Search Console** — register `clearpathedgroup.com`, verify ownership, request indexing
2. **Supabase redirect URLs** — confirm `https://waypoint.clearpathedgroup.com/reset-password` is in the list
3. **Resend sender domain** — verify `waypointdaep.com` in Resend → Domains, update Edge Function `FROM_EMAIL`, redeploy
4. **Supabase auth SMTP** — configure before pilot (3/hr default rate limit)
5. **First pilot district** — product is sales-ready
6. **Pricing finalization** — $6K / $10K / $18K / custom tiers

---

## Key Lesson — NEVER REPEAT
When migrating repos or setting up new CI/CD pipelines, always verify secrets produce non-empty values in the build log before assuming the deployment is good. A `***` in the log means set; a blank after `=` means empty.
